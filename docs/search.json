[
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "NYC Payroll Analysis: Identifying Potential Savings",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(readr)\n\npayroll_data &lt;- read_csv(\"data/mp01/nyc_payroll_export.csv\")\n\nRows: 6225611 Columns: 17\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (8): agency_name, last_name, first_name, mid_init, work_location_boroug...\ndbl  (8): fiscal_year, payroll_number, base_salary, regular_hours, regular_g...\ndttm (1): agency_start_date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nglimpse(payroll_data)\n\nRows: 6,225,611\nColumns: 17\n$ fiscal_year                &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2…\n$ payroll_number             &lt;dbl&gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,…\n$ agency_name                &lt;chr&gt; \"ADMIN FOR CHILDREN'S SVCS\", \"ADMIN FOR CHI…\n$ last_name                  &lt;chr&gt; \"FAYE FALL\", \"KILGORE\", \"WISDOM\", \"MILLER\",…\n$ first_name                 &lt;chr&gt; \"SOKHNA\", \"ORLANTHA\", \"CHERISE\", \"MOYA-GAYE…\n$ mid_init                   &lt;chr&gt; \"M\", \"B\", \"M\", \"S\", \"M\", \"L\", \"O\", NA, \"N\",…\n$ agency_start_date          &lt;dttm&gt; 2023-11-20, 2023-08-28, 2022-10-24, 2023-0…\n$ work_location_borough      &lt;chr&gt; \"BRONX\", \"BROOKLYN\", \"MANHATTAN\", \"MANHATTA…\n$ title_description          &lt;chr&gt; \"CHILD PROTECTIVE SPECIALIST\", \"CHILD PROTE…\n$ leave_status_as_of_june_30 &lt;chr&gt; \"ACTIVE\", \"ACTIVE\", \"ON LEAVE\", \"ON LEAVE\",…\n$ base_salary                &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6…\n$ pay_basis                  &lt;chr&gt; \"per Annum\", \"per Annum\", \"per Annum\", \"per…\n$ regular_hours              &lt;dbl&gt; 1050.00, 1470.00, 1251.50, 1400.75, 700.00,…\n$ regular_gross_paid         &lt;dbl&gt; 31267.96, 44660.96, 28649.20, 44515.43, 221…\n$ ot_hours                   &lt;dbl&gt; 12.00, 99.75, 30.00, 44.75, 53.00, 146.00, …\n$ total_ot_paid              &lt;dbl&gt; 425.00, 3859.84, 802.42, 1476.98, 1933.33, …\n$ total_other_pay            &lt;dbl&gt; 78.04, 78.14, 78.26, 78.37, 78.47, 78.86, 7…\n\nhead(payroll_data)\n\n# A tibble: 6 × 17\n  fiscal_year payroll_number agency_name           last_name first_name mid_init\n        &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;   \n1        2024             67 ADMIN FOR CHILDREN'S… FAYE FALL SOKHNA     M       \n2        2024             67 ADMIN FOR CHILDREN'S… KILGORE   ORLANTHA   B       \n3        2024             67 ADMIN FOR CHILDREN'S… WISDOM    CHERISE    M       \n4        2024             67 ADMIN FOR CHILDREN'S… MILLER    MOYA-GAYE  S       \n5        2024             67 ADMIN FOR CHILDREN'S… BRADLEY   YASHIKA    M       \n6        2024             67 ADMIN FOR CHILDREN'S… MAURINO   JENNIFER   L       \n# ℹ 11 more variables: agency_start_date &lt;dttm&gt;, work_location_borough &lt;chr&gt;,\n#   title_description &lt;chr&gt;, leave_status_as_of_june_30 &lt;chr&gt;,\n#   base_salary &lt;dbl&gt;, pay_basis &lt;chr&gt;, regular_hours &lt;dbl&gt;,\n#   regular_gross_paid &lt;dbl&gt;, ot_hours &lt;dbl&gt;, total_ot_paid &lt;dbl&gt;,\n#   total_other_pay &lt;dbl&gt;\n\nlibrary(tidyverse)\nlibrary(stringr)\npayroll_cleaned &lt;- payroll_data %&gt;%\n  mutate(\n    agency_name = str_to_title(agency_name),\n    last_name = str_to_title(last_name),\n    first_name = str_to_title(first_name),\n    work_location_borough = str_to_title(work_location_borough),\n    title_description = str_to_title(title_description),\n    leave_status_as_of_june_30 = str_to_title(leave_status_as_of_june_30)\n  )\n\n\nglimpse(payroll_cleaned)\n\nRows: 6,225,611\nColumns: 17\n$ fiscal_year                &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2…\n$ payroll_number             &lt;dbl&gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,…\n$ agency_name                &lt;chr&gt; \"Admin For Children's Svcs\", \"Admin For Chi…\n$ last_name                  &lt;chr&gt; \"Faye Fall\", \"Kilgore\", \"Wisdom\", \"Miller\",…\n$ first_name                 &lt;chr&gt; \"Sokhna\", \"Orlantha\", \"Cherise\", \"Moya-Gaye…\n$ mid_init                   &lt;chr&gt; \"M\", \"B\", \"M\", \"S\", \"M\", \"L\", \"O\", NA, \"N\",…\n$ agency_start_date          &lt;dttm&gt; 2023-11-20, 2023-08-28, 2022-10-24, 2023-0…\n$ work_location_borough      &lt;chr&gt; \"Bronx\", \"Brooklyn\", \"Manhattan\", \"Manhatta…\n$ title_description          &lt;chr&gt; \"Child Protective Specialist\", \"Child Prote…\n$ leave_status_as_of_june_30 &lt;chr&gt; \"Active\", \"Active\", \"On Leave\", \"On Leave\",…\n$ base_salary                &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6…\n$ pay_basis                  &lt;chr&gt; \"per Annum\", \"per Annum\", \"per Annum\", \"per…\n$ regular_hours              &lt;dbl&gt; 1050.00, 1470.00, 1251.50, 1400.75, 700.00,…\n$ regular_gross_paid         &lt;dbl&gt; 31267.96, 44660.96, 28649.20, 44515.43, 221…\n$ ot_hours                   &lt;dbl&gt; 12.00, 99.75, 30.00, 44.75, 53.00, 146.00, …\n$ total_ot_paid              &lt;dbl&gt; 425.00, 3859.84, 802.42, 1476.98, 1933.33, …\n$ total_other_pay            &lt;dbl&gt; 78.04, 78.14, 78.26, 78.37, 78.47, 78.86, 7…\n\nhead(payroll_cleaned)\n\n# A tibble: 6 × 17\n  fiscal_year payroll_number agency_name           last_name first_name mid_init\n        &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;   \n1        2024             67 Admin For Children's… Faye Fall Sokhna     M       \n2        2024             67 Admin For Children's… Kilgore   Orlantha   B       \n3        2024             67 Admin For Children's… Wisdom    Cherise    M       \n4        2024             67 Admin For Children's… Miller    Moya-Gaye  S       \n5        2024             67 Admin For Children's… Bradley   Yashika    M       \n6        2024             67 Admin For Children's… Maurino   Jennifer   L       \n# ℹ 11 more variables: agency_start_date &lt;dttm&gt;, work_location_borough &lt;chr&gt;,\n#   title_description &lt;chr&gt;, leave_status_as_of_june_30 &lt;chr&gt;,\n#   base_salary &lt;dbl&gt;, pay_basis &lt;chr&gt;, regular_hours &lt;dbl&gt;,\n#   regular_gross_paid &lt;dbl&gt;, ot_hours &lt;dbl&gt;, total_ot_paid &lt;dbl&gt;,\n#   total_other_pay &lt;dbl&gt;\nFixing Boroughs names\npayroll_cleaned &lt;- payroll_cleaned %&gt;%\n  mutate(\n    work_location_borough = case_when(\n      \n      work_location_borough == \"Richmond\" ~ \"Staten Island\",\n      \n#Moving non-NYC locations into a column named \"Other\"\n      work_location_borough %in% c(\n        \"Orange\", \"Westchester\", \"Sullivan\", \"Nassau\", \n        \"Delaware\", \"Ulster\", \"Washington Dc\", \"Putnam\", \n        \"Schoharie\", \"Dutchess\", \"Greene\", \"Albany\"\n      ) ~ \"Other\",\n      \n      \n      TRUE ~ work_location_borough\n    )\n  )\nunique(payroll_cleaned$work_location_borough)\n\n[1] \"Bronx\"         \"Brooklyn\"      \"Manhattan\"     \"Staten Island\"\n[5] \"Queens\"        NA              \"Other\"        \n\nwrite_csv(payroll_cleaned, \"data/mp01/nyc_payroll_cleaned.csv\")\nlibrary(dplyr) \nlibrary(DT)    \nlibrary(scales)\n\n\nAttaching package: 'scales'\n\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\n\nThe following object is masked from 'package:readr':\n\n    col_factor\neric_adams_data &lt;- payroll_cleaned %&gt;%\n  filter(\n    first_name == \"Eric\" & last_name == \"Adams\"  \n  ) %&gt;%\n  select(fiscal_year, title_description, agency_name, regular_gross_paid) %&gt;%\n  rename(\n    `Fiscal Year` = fiscal_year,\n    `Position` = title_description,\n    `Agency` = agency_name,\n    `Total Salary` = regular_gross_paid\n  ) %&gt;%\n  arrange(`Fiscal Year`)\neric_adams_data &lt;- eric_adams_data %&gt;%\n  mutate(`Total Salary` = dollar(`Total Salary`))\ndatatable(\n  eric_adams_data, \n  options = list(\n    searching = FALSE,  \n    paging = FALSE,     \n    info = FALSE         \n  )\n)\nCalculating total compensation\npayroll_cleaned &lt;- payroll_cleaned %&gt;%\n  mutate(\n    total_compensation = case_when(\n      pay_basis == \"per Annum\" ~ base_salary,  \n      pay_basis == \"per Hour\" ~ (regular_hours * base_salary) + (ot_hours * base_salary * 1.5),  # Hourly Employees\n      pay_basis == \"per Day\" & title_description == \"Adjunct Lecturer\" ~ (regular_hours / 1.5) * base_salary,  # Adjunct Lecturers\n      pay_basis == \"per Day\" ~ (regular_hours / 7.5) * base_salary,  \n      TRUE ~ NA_real_  \n    )\n  )\n\nglimpse(payroll_cleaned)\n\nRows: 6,225,611\nColumns: 18\n$ fiscal_year                &lt;dbl&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2…\n$ payroll_number             &lt;dbl&gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,…\n$ agency_name                &lt;chr&gt; \"Admin For Children's Svcs\", \"Admin For Chi…\n$ last_name                  &lt;chr&gt; \"Faye Fall\", \"Kilgore\", \"Wisdom\", \"Miller\",…\n$ first_name                 &lt;chr&gt; \"Sokhna\", \"Orlantha\", \"Cherise\", \"Moya-Gaye…\n$ mid_init                   &lt;chr&gt; \"M\", \"B\", \"M\", \"S\", \"M\", \"L\", \"O\", NA, \"N\",…\n$ agency_start_date          &lt;dttm&gt; 2023-11-20, 2023-08-28, 2022-10-24, 2023-0…\n$ work_location_borough      &lt;chr&gt; \"Bronx\", \"Brooklyn\", \"Manhattan\", \"Manhatta…\n$ title_description          &lt;chr&gt; \"Child Protective Specialist\", \"Child Prote…\n$ leave_status_as_of_june_30 &lt;chr&gt; \"Active\", \"Active\", \"On Leave\", \"On Leave\",…\n$ base_salary                &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6…\n$ pay_basis                  &lt;chr&gt; \"per Annum\", \"per Annum\", \"per Annum\", \"per…\n$ regular_hours              &lt;dbl&gt; 1050.00, 1470.00, 1251.50, 1400.75, 700.00,…\n$ regular_gross_paid         &lt;dbl&gt; 31267.96, 44660.96, 28649.20, 44515.43, 221…\n$ ot_hours                   &lt;dbl&gt; 12.00, 99.75, 30.00, 44.75, 53.00, 146.00, …\n$ total_ot_paid              &lt;dbl&gt; 425.00, 3859.84, 802.42, 1476.98, 1933.33, …\n$ total_other_pay            &lt;dbl&gt; 78.04, 78.14, 78.26, 78.37, 78.47, 78.86, 7…\n$ total_compensation         &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6…\n\nhead(payroll_cleaned %&gt;% select(first_name, last_name, pay_basis, base_salary, regular_hours, ot_hours, total_compensation))\n\n# A tibble: 6 × 7\n  first_name last_name pay_basis base_salary regular_hours ot_hours\n  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;\n1 Sokhna     Faye Fall per Annum       62043         1050      12  \n2 Orlantha   Kilgore   per Annum       62043         1470      99.8\n3 Cherise    Wisdom    per Annum       43144         1252.     30  \n4 Moya-Gaye  Miller    per Annum       62043         1401.     44.8\n5 Yashika    Bradley   per Annum       60236          700      53  \n6 Jennifer   Maurino   per Annum       62043         1470     146  \n# ℹ 1 more variable: total_compensation &lt;dbl&gt;\nFiltering Eric Adam’s records\neric_adams_data &lt;- payroll_cleaned %&gt;%\n  filter(first_name == \"Eric\" & last_name == \"Adams\") %&gt;%\n  select(fiscal_year, title_description, agency_name, total_compensation) %&gt;%\n  arrange(fiscal_year)\n\nhead(eric_adams_data)\n\n# A tibble: 6 × 4\n  fiscal_year title_description        agency_name            total_compensation\n        &lt;dbl&gt; &lt;chr&gt;                    &lt;chr&gt;                               &lt;dbl&gt;\n1        2014 Borough President        Borough President-Bro…            160000 \n2        2015 Borough President        Borough President-Bro…            160000 \n3        2016 Borough President        Borough President-Bro…            179200 \n4        2017 Borough President        Borough President-Bro…            179200 \n5        2018 Borough President        Borough President-Bro…            179200 \n6        2018 Job Training Participant Dept Of Parks & Recre…              7354.\neric_adams_data &lt;- payroll_cleaned %&gt;%\n  filter(first_name == \"Eric\", last_name == \"Adams\") %&gt;%\n  select(fiscal_year, title_description, agency_name, total_compensation) %&gt;%\n  arrange(fiscal_year)\n\nlibrary(scales)\neric_adams_data &lt;- eric_adams_data %&gt;%\n  mutate(total_compensation = dollar(total_compensation))\n\n\nlibrary(DT)\ndatatable(\n  eric_adams_data,\n  options = list(searching = FALSE, paging = FALSE, info = FALSE)\n)\nTask4 Q1 - Finding the Job title with highest base pay rate\nhighest_paid_job &lt;- payroll_cleaned %&gt;%\n  filter(!is.na(base_salary) & base_salary &gt; 0) %&gt;%  \n  group_by(title_description) %&gt;%\n  summarise(max_base_salary = max(base_salary, na.rm = TRUE)) %&gt;%  \n  arrange(desc(max_base_salary)) %&gt;%  \n  slice(1)  \n\nhighest_paid_job\n\n# A tibble: 1 × 2\n  title_description max_base_salary\n  &lt;chr&gt;                       &lt;dbl&gt;\n1 Chair                      414707\nTask4 Q2 - Finding the Individual with the Highest Total Payroll\nhighest_paid_individual &lt;- payroll_cleaned %&gt;%\n  filter(!is.na(total_compensation) & total_compensation &gt; 0) %&gt;%  \n  select(fiscal_year, first_name, last_name, total_compensation) %&gt;%\n  arrange(desc(total_compensation)) %&gt;%\n  slice(1)  \n\nhighest_paid_individual\n\n# A tibble: 1 × 4\n  fiscal_year first_name last_name total_compensation\n        &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                  &lt;dbl&gt;\n1        2022 Gregory    Russ                  414707\nTask4 Q3 - Finding the Individual Who Worked the Most Overtime Hours\nmost_overtime_individual &lt;- payroll_cleaned %&gt;%\n  filter(!is.na(ot_hours) & ot_hours &gt; 0) %&gt;%  \n  select(first_name, last_name, fiscal_year, ot_hours) %&gt;%\n  arrange(desc(ot_hours)) %&gt;%\n  slice(1)  \n\n\nmost_overtime_individual\n\n# A tibble: 1 × 4\n  first_name last_name   fiscal_year ot_hours\n  &lt;chr&gt;      &lt;chr&gt;             &lt;dbl&gt;    &lt;dbl&gt;\n1 James      Internicola        2022    3693.\nTask4 Q4 -Finding the Agency with the Highest Average Total Annual Payroll\nhighest_avg_pay_agency &lt;- payroll_cleaned %&gt;%\n  filter(!is.na(total_compensation)) %&gt;%\n  group_by(agency_name) %&gt;%\n  summarise(avg_total_pay = mean(total_compensation, na.rm = TRUE)) %&gt;%\n  arrange(desc(avg_total_pay)) %&gt;%\n  slice(1)  \n\nhighest_avg_pay_agency\n\n# A tibble: 1 × 2\n  agency_name             avg_total_pay\n  &lt;chr&gt;                           &lt;dbl&gt;\n1 Office Of Racial Equity       151093.\nTask 4 Q5 - Finding agency with the most employees on payroll in each year\nmost_employees_per_year &lt;- payroll_cleaned %&gt;%\n  group_by(fiscal_year, agency_name) %&gt;%\n  summarise(employee_count = n(), .groups = \"drop\") %&gt;%\n  arrange(fiscal_year, desc(employee_count)) %&gt;%\n  group_by(fiscal_year) %&gt;%\n  slice(1)  \n\nmost_employees_per_year\n\n# A tibble: 11 × 3\n# Groups:   fiscal_year [11]\n   fiscal_year agency_name            employee_count\n         &lt;dbl&gt; &lt;chr&gt;                           &lt;int&gt;\n 1        2014 Dept Of Ed Pedagogical         100589\n 2        2015 Dept Of Ed Pedagogical         111857\n 3        2016 Dept Of Ed Pedagogical         106263\n 4        2017 Dept Of Ed Pedagogical         104629\n 5        2018 Dept Of Ed Pedagogical         107956\n 6        2019 Dept Of Ed Pedagogical         112067\n 7        2020 Dept Of Ed Pedagogical         114999\n 8        2021 Dept Of Ed Pedagogical         113523\n 9        2022 Dept Of Ed Pedagogical         120453\n10        2023 Dept Of Ed Pedagogical         106882\n11        2024 Dept Of Ed Pedagogical         108209\nTask4 Q6 - Finding agency with the highest overtime usage compared to regular hours\novertime_usage &lt;- payroll_cleaned %&gt;%\n  group_by(agency_name) %&gt;%\n  summarise(\n    total_regular_hours = sum(regular_hours, na.rm = TRUE),\n    total_ot_hours = sum(ot_hours, na.rm = TRUE),\n    ot_ratio = total_ot_hours / total_regular_hours  \n  ) %&gt;%\n  arrange(desc(ot_ratio)) %&gt;%  \n  slice(1)  \n\novertime_usage\n\n# A tibble: 1 × 4\n  agency_name       total_regular_hours total_ot_hours ot_ratio\n  &lt;chr&gt;                           &lt;dbl&gt;          &lt;dbl&gt;    &lt;dbl&gt;\n1 Board Of Election           15339960.       3062029.    0.200\nTask4 Q7 - Finding the average salary of employees who work outside the five boroughs\navg_salary_outside_nyc &lt;- payroll_cleaned %&gt;%\n  filter(!work_location_borough %in% c(\"Manhattan\", \"Brooklyn\", \"Queens\", \"Bronx\", \"Staten Island\")) %&gt;%\n  summarise(average_salary = mean(base_salary, na.rm = TRUE))\n\navg_salary_outside_nyc\n\n# A tibble: 1 × 1\n  average_salary\n           &lt;dbl&gt;\n1         53479.\nTask4 Q8 - Calculating city’s aggregate payroll grown over the past 10 years\npayroll_growth &lt;- payroll_cleaned %&gt;%\n  group_by(fiscal_year) %&gt;%\n  summarise(total_payroll = sum(total_compensation, na.rm = TRUE)) %&gt;%\n  arrange(fiscal_year)  \n\n\npayroll_growth\n\n# A tibble: 11 × 2\n   fiscal_year total_payroll\n         &lt;dbl&gt;         &lt;dbl&gt;\n 1        2014  20921749184.\n 2        2015  23638923757.\n 3        2016  24622274711.\n 4        2017  25196303601.\n 5        2018  25919905007.\n 6        2019  27580761532.\n 7        2020  28872884557.\n 8        2021  28379441739.\n 9        2022  30843961664.\n10        2023  29507791202.\n11        2024  30278751578.\nCalculating Mayor’s Salary for Each Fiscal Year\nmayor_salary &lt;- payroll_cleaned %&gt;%\n  filter(title_description == \"Mayor\") %&gt;%\n  select(fiscal_year, total_compensation) %&gt;%\n  distinct()\n\n\nmayor_salary\n\n# A tibble: 12 × 2\n   fiscal_year total_compensation\n         &lt;dbl&gt;              &lt;dbl&gt;\n 1        2024             258750\n 2        2023             258750\n 3        2022             258750\n 4        2021             258750\n 5        2020             258750\n 6        2019             258750\n 7        2018             258750\n 8        2017             225000\n 9        2016             225000\n10        2015             225000\n11        2014             225000\n12        2014                  1\nFinding employees who earn more than mayor\nhighest_paid_individual &lt;- payroll_cleaned %&gt;%\n  filter(total_compensation == max(total_compensation, na.rm = TRUE)) %&gt;%\n  select(first_name, last_name, fiscal_year, title_description, agency_name, total_compensation)\n\nhighest_paid_individual\n\n# A tibble: 3 × 6\n  first_name last_name fiscal_year title_description agency_name          \n  &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;                \n1 Gregory    Russ             2022 Chair             Nyc Housing Authority\n2 Gregory    Russ             2021 Chair             Nyc Housing Authority\n3 Gregory    Russ             2020 Chair             Nyc Housing Authority\n# ℹ 1 more variable: total_compensation &lt;dbl&gt;\nIncluding agency_name column in highest_paid_individual dataset\nhighest_paid_individual &lt;- payroll_cleaned %&gt;%\n  filter(total_compensation == max(total_compensation, na.rm = TRUE)) %&gt;%\n  select(first_name, last_name, fiscal_year, title_description, agency_name, total_compensation)\nComparing high earning employees with mayor’s salary\ncapped_salaries &lt;- highest_paid_individual %&gt;%\n  left_join(mayor_salary, by = \"fiscal_year\", suffix = c(\"_employee\", \"_mayor\")) %&gt;%  \n  \n  mutate(\n    capped_compensation = pmin(total_compensation_employee, total_compensation_mayor),  \n    savings = total_compensation_employee - capped_compensation  \n  )\n\n#Calculating total savings among all affected employees\ntotal_savings &lt;- sum(capped_salaries$savings, na.rm = TRUE)\n\n\nlist(\n  employees_affected = capped_salaries,  \n  total_amount_saved = total_savings  \n)\n\n$employees_affected\n# A tibble: 3 × 9\n  first_name last_name fiscal_year title_description agency_name          \n  &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;                \n1 Gregory    Russ             2022 Chair             Nyc Housing Authority\n2 Gregory    Russ             2021 Chair             Nyc Housing Authority\n3 Gregory    Russ             2020 Chair             Nyc Housing Authority\n# ℹ 4 more variables: total_compensation_employee &lt;dbl&gt;,\n#   total_compensation_mayor &lt;dbl&gt;, capped_compensation &lt;dbl&gt;, savings &lt;dbl&gt;\n\n$total_amount_saved\n[1] 467871\naffected_agencies &lt;- highest_paid_individual %&gt;%\n  count(agency_name, sort = TRUE) %&gt;%\n  head(10)\n\naffected_job_titles &lt;- highest_paid_individual %&gt;%\n  count(title_description, sort = TRUE) %&gt;%\n  head(10)\n\nlist(affected_agencies, affected_job_titles)\n\n[[1]]\n# A tibble: 1 × 2\n  agency_name               n\n  &lt;chr&gt;                 &lt;int&gt;\n1 Nyc Housing Authority     3\n\n[[2]]\n# A tibble: 1 × 2\n  title_description     n\n  &lt;chr&gt;             &lt;int&gt;\n1 Chair                 3\n# Step 1: Compute total overtime hours worked per agency and job title\novertime_usage &lt;- payroll_cleaned %&gt;%\n  group_by(agency_name, title_description) %&gt;%\n  summarise(total_overtime_hours = sum(ot_hours, na.rm = TRUE), .groups = \"drop\") %&gt;%\n  filter(total_overtime_hours &gt; 0)  # Keep only roles with overtime usage\n\n# Step 2: Estimate full-time employees needed to replace overtime\n# Assuming a full-time employee works 2000 hours per year\novertime_usage &lt;- overtime_usage %&gt;%\n  mutate(full_time_replacements = total_overtime_hours / 2000)\n\n# Step 3: Calculate savings by converting overtime hours to regular hours\n# Regular pay is base_salary per hour, overtime is paid at 1.5x\nsavings_analysis &lt;- payroll_cleaned %&gt;%\n  group_by(agency_name, title_description) %&gt;%\n  summarise(\n    avg_base_salary = mean(base_salary, na.rm = TRUE),\n    total_overtime_hours = sum(ot_hours, na.rm = TRUE),\n    .groups = \"drop\"\n  ) %&gt;%\n  filter(total_overtime_hours &gt; 0) %&gt;%\n  mutate(\n    overtime_cost = total_overtime_hours * avg_base_salary * 1.5,  \n    regular_cost = (total_overtime_hours / 2000) * avg_base_salary * 2000,  \n    savings = overtime_cost - regular_cost  \n  )\n\n\ntop_savings_agencies &lt;- savings_analysis %&gt;%\n  group_by(agency_name) %&gt;%\n  summarise(total_savings = sum(savings, na.rm = TRUE), .groups = \"drop\") %&gt;%\n  arrange(desc(total_savings)) %&gt;%\n  head(10)  \n\n\nlist(\n  overtime_usage = head(overtime_usage, 10),\n  savings_analysis = head(savings_analysis, 10),\n  top_savings_agencies = top_savings_agencies\n)\n\n$overtime_usage\n# A tibble: 10 × 4\n   agency_name     title_description total_overtime_hours full_time_replacements\n   &lt;chr&gt;           &lt;chr&gt;                            &lt;dbl&gt;                  &lt;dbl&gt;\n 1 Admin For Chil… *Attorney At Law                 674.                  0.337 \n 2 Admin For Chil… *Certified Datab…                413.                  0.207 \n 3 Admin For Chil… *Certified Local…                442.                  0.221 \n 4 Admin For Chil… *Cook                           9791.                  4.90  \n 5 Admin For Chil… *Custodial Assis…               3688                   1.84  \n 6 Admin For Chil… *Senior Cook                    6210.                  3.11  \n 7 Admin For Chil… Accountant                        94.5                 0.0472\n 8 Admin For Chil… Adm Manager-Non-…              28855.                 14.4   \n 9 Admin For Chil… Adm Manager-Non-…              16812.                  8.41  \n10 Admin For Chil… Admin Community …              18898.                  9.45  \n\n$savings_analysis\n# A tibble: 10 × 7\n   agency_name            title_description avg_base_salary total_overtime_hours\n   &lt;chr&gt;                  &lt;chr&gt;                       &lt;dbl&gt;                &lt;dbl&gt;\n 1 Admin For Children's … *Attorney At Law           95236.                674. \n 2 Admin For Children's … *Certified Datab…         111355.                413. \n 3 Admin For Children's … *Certified Local…          97169                 442. \n 4 Admin For Children's … *Cook                      40320.               9791. \n 5 Admin For Children's … *Custodial Assis…          38472.               3688  \n 6 Admin For Children's … *Senior Cook               43749.               6210. \n 7 Admin For Children's … Accountant                 65091.                 94.5\n 8 Admin For Children's … Adm Manager-Non-…          79729.              28855. \n 9 Admin For Children's … Adm Manager-Non-…          69816.              16812. \n10 Admin For Children's … Admin Community …          86126.              18898. \n# ℹ 3 more variables: overtime_cost &lt;dbl&gt;, regular_cost &lt;dbl&gt;, savings &lt;dbl&gt;\n\n$top_savings_agencies\n# A tibble: 10 × 2\n   agency_name                    total_savings\n   &lt;chr&gt;                                  &lt;dbl&gt;\n 1 Police Department                    5.44e12\n 2 Fire Department                      2.77e12\n 3 Department Of Correction             1.54e12\n 4 Department Of Sanitation             1.11e12\n 5 Nyc Housing Authority                3.59e11\n 6 Hra/Dept Of Social Services          3.57e11\n 7 Admin For Children's Svcs            3.08e11\n 8 Department Of Transportation         2.62e11\n 9 Dept Of Environment Protection       1.63e11\n10 Dept. Of Homeless Services           1.07e11\nSummary\nOur analysis of city payroll data reveals that high overtime costs, especially in the Police Department and Fire Department, make up a significant portion of overall expenses. Shifting overtime hours to full-time positions could lead to major savings, with the Police Department alone potentially saving around $5.44 trillion. Other agencies, such as the Department of Corrections, NYC Housing Authority, and HRA, also rely heavily on overtime, which could be reduced through smarter hiring strategies.\nRecommendations\nSome recommendations are :\novertime_by_job &lt;- payroll_cleaned %&gt;%\n  group_by(agency_name, title_description) %&gt;%\n  summarise(total_ot_hours = sum(ot_hours, na.rm = TRUE), .groups = \"drop\") %&gt;%\n  arrange(desc(total_ot_hours))\n\nhead(overtime_by_job, 10)\n\n# A tibble: 10 × 3\n   agency_name              title_description         total_ot_hours\n   &lt;chr&gt;                    &lt;chr&gt;                              &lt;dbl&gt;\n 1 Police Department        Police Officer                 62139879.\n 2 Fire Department          Firefighter                    43536213.\n 3 Department Of Correction Correction Officer             34092745.\n 4 Department Of Sanitation Sanitation Worker              23098266.\n 5 Police Department        School Safety Agent            15964805.\n 6 Police Department        P.o. Da Det Gr3                15179326.\n 7 Nyc Housing Authority    Caretaker                       9439229.\n 8 Fire Department          Lieutenant                      7607797.\n 9 Police Department        Sergeant-                       7545577.\n10 Police Department        Traffic Enforcement Agent       7118475.\novertime_replacement &lt;- overtime_by_job %&gt;%\n  mutate(full_time_needed = (total_ot_hours / 2080) * 1.5)\n\n\nhead(overtime_replacement, 10)\n\n# A tibble: 10 × 4\n   agency_name              title_description    total_ot_hours full_time_needed\n   &lt;chr&gt;                    &lt;chr&gt;                         &lt;dbl&gt;            &lt;dbl&gt;\n 1 Police Department        Police Officer            62139879.           44812.\n 2 Fire Department          Firefighter               43536213.           31396.\n 3 Department Of Correction Correction Officer        34092745.           24586.\n 4 Department Of Sanitation Sanitation Worker         23098266.           16657.\n 5 Police Department        School Safety Agent       15964805.           11513.\n 6 Police Department        P.o. Da Det Gr3           15179326.           10947.\n 7 Nyc Housing Authority    Caretaker                  9439229.            6807.\n 8 Fire Department          Lieutenant                 7607797.            5486.\n 9 Police Department        Sergeant-                  7545577.            5442.\n10 Police Department        Traffic Enforcement…       7118475.            5134.\novertime_savings &lt;- payroll_cleaned %&gt;%\n  group_by(agency_name, title_description) %&gt;%\n  summarise(\n    total_ot_hours = sum(ot_hours, na.rm = TRUE),\n    avg_hourly_wage = mean(base_salary / 2080, na.rm = TRUE),  \n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(\n    ot_cost = total_ot_hours * avg_hourly_wage * 1.5,  \n    reg_cost = total_ot_hours * avg_hourly_wage,  \n    savings = ot_cost - reg_cost  \n  ) %&gt;%\n  arrange(desc(savings))\n\n\nhead(overtime_savings, 10)\n\n# A tibble: 10 × 7\n   agency_name title_description total_ot_hours avg_hourly_wage ot_cost reg_cost\n   &lt;chr&gt;       &lt;chr&gt;                      &lt;dbl&gt;           &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;\n 1 Police Dep… Police Officer         62139879.            34.1  3.18e9   2.12e9\n 2 Fire Depar… Firefighter            43536213.            37.0  2.41e9   1.61e9\n 3 Department… Correction Offic…      34092745.            34.6  1.77e9   1.18e9\n 4 Department… Sanitation Worker      23098266.            33.5  1.16e9   7.73e8\n 5 Police Dep… P.o. Da Det Gr3        15179326.            46.6  1.06e9   7.07e8\n 6 Police Dep… Sergeant-               7545577.            51.1  5.78e8   3.86e8\n 7 Fire Depar… Lieutenant              7607797.            50.2  5.73e8   3.82e8\n 8 Police Dep… School Safety Ag…      15964805.            20.6  4.92e8   3.28e8\n 9 Police Dep… Lieutenant              4796750.            59.3  4.26e8   2.84e8\n10 Department… Captain                 4578674.            48.3  3.32e8   2.21e8\n# ℹ 1 more variable: savings &lt;dbl&gt;\nCalculating savings for each agency\nagency_savings &lt;- overtime_savings %&gt;%\n  group_by(agency_name) %&gt;%\n  summarise(total_savings = sum(savings, na.rm = TRUE), .groups = \"drop\") %&gt;%\n  arrange(desc(total_savings))\n\nhead(agency_savings, 10)\n\n# A tibble: 10 × 2\n   agency_name                    total_savings\n   &lt;chr&gt;                                  &lt;dbl&gt;\n 1 Police Department                2615708191.\n 2 Fire Department                  1333482940.\n 3 Department Of Correction          741593209.\n 4 Department Of Sanitation          535014906.\n 5 Nyc Housing Authority             172575977.\n 6 Hra/Dept Of Social Services       171591017.\n 7 Admin For Children's Svcs         148044480.\n 8 Department Of Transportation      126130646.\n 9 Dept Of Environment Protection     78524051.\n10 Dept. Of Homeless Services         51569931.\nCalculating estimated savings\ntotal_savings &lt;- sum(overtime_savings$savings, na.rm = TRUE)\n\ntotal_savings\n\n[1] 6324255339"
  },
  {
    "objectID": "mp01.html#new-policy-recommendation",
    "href": "mp01.html#new-policy-recommendation",
    "title": "NYC Payroll Analysis: Identifying Potential Savings",
    "section": "New Policy recommendation",
    "text": "New Policy recommendation\n\nReplacing Some Full-Time Roles with Part-Time Employees\nIdentify job titles that could be converted to part-time roles\n\npart_time_eligible_roles &lt;- payroll_cleaned %&gt;%\n  filter(regular_hours == 2080) %&gt;%  \n  group_by(title_description, agency_name) %&gt;%\n  summarise(\n    num_employees = n(),\n    avg_salary_weekly = mean(base_salary / 52, na.rm = TRUE),  \n    .groups = \"drop\"\n  ) %&gt;%\n  mutate(\n    full_time_cost = num_employees * 1200,  \n    part_time_cost = num_employees * 500 * 2,  \n    savings = full_time_cost - part_time_cost\n  ) %&gt;%\n  arrange(desc(savings))  \n\n\nhead(part_time_eligible_roles, 10)\n\n# A tibble: 10 × 7\n   title_description  agency_name num_employees avg_salary_weekly full_time_cost\n   &lt;chr&gt;              &lt;chr&gt;               &lt;int&gt;             &lt;dbl&gt;          &lt;dbl&gt;\n 1 Police Officer     Police Dep…         98485             1468.      118182000\n 2 Firefighter        Fire Depar…         35419             1600.       42502800\n 3 Correction Officer Department…         29275             1594.       35130000\n 4 Sanitation Worker  Department…         24514             1467.       29416800\n 5 School Safety Age… Police Dep…         20326              920.       24391200\n 6 Sergeant-          Police Dep…         17139             2053.       20566800\n 7 P.o. Da Det Gr3    Police Dep…         15258             1987.       18309600\n 8 Traffic Enforceme… Police Dep…         10423              875.       12507600\n 9 Caretaker          Nyc Housin…         10327              837.       12392400\n10 Lieutenant         Fire Depar…          6602             2128.        7922400\n# ℹ 2 more variables: part_time_cost &lt;dbl&gt;, savings &lt;dbl&gt;\n\ntotal_savings &lt;- sum(part_time_eligible_roles$savings, na.rm = TRUE)\n\n\nlist(\n  top_roles_for_conversion = head(part_time_eligible_roles, 10),\n  total_potential_savings = total_savings\n)\n\n$top_roles_for_conversion\n# A tibble: 10 × 7\n   title_description  agency_name num_employees avg_salary_weekly full_time_cost\n   &lt;chr&gt;              &lt;chr&gt;               &lt;int&gt;             &lt;dbl&gt;          &lt;dbl&gt;\n 1 Police Officer     Police Dep…         98485             1468.      118182000\n 2 Firefighter        Fire Depar…         35419             1600.       42502800\n 3 Correction Officer Department…         29275             1594.       35130000\n 4 Sanitation Worker  Department…         24514             1467.       29416800\n 5 School Safety Age… Police Dep…         20326              920.       24391200\n 6 Sergeant-          Police Dep…         17139             2053.       20566800\n 7 P.o. Da Det Gr3    Police Dep…         15258             1987.       18309600\n 8 Traffic Enforceme… Police Dep…         10423              875.       12507600\n 9 Caretaker          Nyc Housin…         10327              837.       12392400\n10 Lieutenant         Fire Depar…          6602             2128.        7922400\n# ℹ 2 more variables: part_time_cost &lt;dbl&gt;, savings &lt;dbl&gt;\n\n$total_potential_savings\n[1] 76130200\n\n\nCalculate part-time salary and cost savings\n\nfull_time_roles &lt;- payroll_cleaned %&gt;%\n  filter(pay_basis == \"per Annum\") %&gt;%  \n  group_by(title_description, agency_name) %&gt;%\n  summarise(\n    avg_salary = mean(base_salary, na.rm = TRUE),  \n    num_employees = n(),\n    .groups = \"drop\"\n  )\n\npart_time_conversion &lt;- full_time_roles %&gt;%\n  mutate(\n    part_time_salary = avg_salary * 0.6,  \n    total_full_time_cost = avg_salary * num_employees,\n    total_part_time_cost = part_time_salary * num_employees,\n    savings = total_full_time_cost - total_part_time_cost\n  )\n\nhead(part_time_conversion, 10)\n\n# A tibble: 10 × 8\n   title_description       agency_name avg_salary num_employees part_time_salary\n   &lt;chr&gt;                   &lt;chr&gt;            &lt;dbl&gt;         &lt;int&gt;            &lt;dbl&gt;\n 1 * Attending Dentist     Dept Of He…    144040              1           86424 \n 2 *Adm Dir Fleet Maint-M… Dept Of Ci…    118034              2           70820.\n 3 *Adm Dir Fleet Mainten… Department…    134367.             5           80620.\n 4 *Adm Dir Fleet Mainten… Department…    129158              1           77495.\n 5 *Adm School Security M… Police Dep…     80937.            24           48562.\n 6 *Admin Schl Secur Mgr-… Police Dep…    163670.             5           98202.\n 7 *Administrative Attorn… Department…     90980              1           54588 \n 8 *Administrative Attorn… Department…    211720.             7          127032.\n 9 *Administrative Attorn… Nyc Housin…    130478.            10           78287.\n10 *Administrative Attorn… Police Dep…    170157              5          102094.\n# ℹ 3 more variables: total_full_time_cost &lt;dbl&gt;, total_part_time_cost &lt;dbl&gt;,\n#   savings &lt;dbl&gt;"
  },
  {
    "objectID": "mp01.html#summary-of-the-new-policy",
    "href": "mp01.html#summary-of-the-new-policy",
    "title": "NYC Payroll Analysis: Identifying Potential Savings",
    "section": "Summary of the New Policy",
    "text": "Summary of the New Policy\nThis policy examines potential savings from replacing some full-time positions with part-time employees. Assuming part-time workers clock 20 hours per week while full-timers work 40, with wages adjusted accordingly, the analysis highlights significant cost reductions. The findings suggest that shifting select roles to part-time could cut costs while maintaining efficiency. The greatest savings come from jobs with high employee counts and lower skill requirements, where part-time coverage is feasible."
  },
  {
    "objectID": "mp01.html#recommendations",
    "href": "mp01.html#recommendations",
    "title": "NYC Payroll Analysis: Identifying Potential Savings",
    "section": "Recommendations",
    "text": "Recommendations\n\nFocus on Suitable Roles – Prioritize administrative, customer service, and lower-skilled jobs that can be handled part-time without impacting productivity.\nFlexible Scheduling – Attract strong candidates by offering adaptable work hours and relevant benefits.\nTrack Impact – Regularly assess productivity and cost savings to ensure the policy remains effective."
  }
]